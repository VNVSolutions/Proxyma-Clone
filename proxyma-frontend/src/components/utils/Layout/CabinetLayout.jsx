import {NavLink, Outlet} from "react-router-dom";
import Container from "../Container/Container.jsx";
import {useTranslation} from "react-i18next";
import {useState} from "react";

import eng from '../../../../public/img/eng.svg';
import rus from '../../../../public/img/rus.svg';

import logo from '../../../../public/img/logo-header.svg';

function CabinetLayout() {
    const { i18n } = useTranslation();
    const [open, setOpen] = useState(false);
    const [openSubmenuProxy,setOpenSubmenuProxy] = useState(false);

    const normalizeLang = (lang) => (lang.startsWith("ru") ? "ru" : "en");
    const [currentLang, setCurrentLang] = useState(normalizeLang(i18n.language));

    const changeLanguage = (lang) => {
        i18n.changeLanguage(lang);
        setCurrentLang(lang);
        setOpen(false);
    };

    const languages = {
        ru: { label: "Рус", flag: rus },
        en: { label: "Eng", flag: eng },
    };
    return (<div className='cabinetPage'>
        <div className='cabinetSideBar'>
            <NavLink to={'cabinet/profile'}><img className='cabinetHeader-logo' src={logo}/></NavLink>

            <nav>
                <div>
                    <h4 className='cabinetSideBarNav-submenu-title'>Прокси-серверы</h4>
                    <ul className='cabinetSideBarNav-submenu-list'>
                        <li className='cabinetSideBarNav-submenu-item'>
                            <div className='cabinetSideBarNav-submenu-item-text' onClick={() => setOpenSubmenuProxy(!openSubmenuProxy)}>

                                <svg width="30" height="30" viewBox="0 0 30 30" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M2.56495 29.9901C1.15423 29.9901 0 28.8359 0 27.4252V21.4272C0 20.7859 0.236764 20.1842 0.660967 19.7106C0.226899 19.2371 0 18.6353 0 17.9941V11.9961C0 11.3548 0.236764 10.753 0.660967 10.2795C0.226899 9.80599 0 9.20421 0 8.56297V2.56495C0 1.14436 1.14436 0 2.56495 0H27.4351C28.8458 0 30 1.14436 30 2.56495V8.56297C30 9.20421 29.7632 9.80599 29.339 10.2795C29.7731 10.753 30 11.3548 30 11.9961V18.0039C30 18.6452 29.7632 19.247 29.339 19.7205C29.7731 20.194 30 20.7958 30 21.437V27.4351C30 28.8458 28.8556 30 27.4351 30H2.56495V29.9901ZM2.56495 20.559C2.08155 20.559 1.69681 20.9536 1.69681 21.4272V27.4252C1.69681 27.9086 2.09142 28.2933 2.56495 28.2933H27.4351C27.9184 28.2933 28.3032 27.8987 28.3032 27.4252V21.4272C28.3032 20.9438 27.9086 20.559 27.4351 20.559H2.56495ZM2.56495 11.1279C2.08155 11.1279 1.69681 11.5225 1.69681 11.9961V17.9941C1.69681 18.4775 2.09142 18.8622 2.56495 18.8622H27.4351C27.9184 18.8622 28.3032 18.4676 28.3032 17.9941V11.9961C28.3032 11.5127 27.9086 11.1279 27.4351 11.1279H2.56495ZM2.56495 1.68695C2.08155 1.68695 1.69681 2.08155 1.69681 2.55508V8.55311C1.69681 9.0365 2.09142 9.42124 2.56495 9.42124H27.4351C27.9184 9.42124 28.3032 9.02664 28.3032 8.55311V2.56495C28.3032 2.08155 27.9086 1.69681 27.4351 1.69681H2.56495V1.68695ZM13.1207 25.2746C12.657 25.2746 12.2723 24.8898 12.2723 24.4262C12.2723 23.9625 12.6472 23.5778 13.1207 23.5778H25.2351C25.6988 23.5778 26.0835 23.9526 26.0835 24.4262C26.0835 24.8997 25.7086 25.2746 25.2351 25.2746H13.1207ZM10.1414 25.2746C9.67774 25.2746 9.293 24.8898 9.293 24.4262C9.293 23.9625 9.66787 23.5778 10.1414 23.5778H10.9306C11.3943 23.5778 11.779 23.9526 11.779 24.4262C11.779 24.8997 11.4041 25.2746 10.9306 25.2746H10.1414ZM7.45807 25.2746C6.99441 25.2746 6.60967 24.8898 6.60967 24.4262C6.60967 23.9625 6.98454 23.5778 7.45807 23.5778H8.24729C8.71095 23.5778 9.09569 23.9526 9.09569 24.4262C9.09569 24.8997 8.72082 25.2746 8.24729 25.2746H7.45807ZM4.76488 25.2746C4.30122 25.2746 3.91647 24.8898 3.91647 24.4262C3.91647 23.9625 4.29135 23.5778 4.76488 23.5778H5.55409C6.01776 23.5778 6.4025 23.9526 6.4025 24.4262C6.4025 24.8997 6.02762 25.2746 5.55409 25.2746H4.76488ZM13.1207 15.8435C12.657 15.8435 12.2723 15.4686 12.2723 14.9951C12.2723 14.5215 12.6472 14.1467 13.1207 14.1467H25.2351C25.6988 14.1467 26.0835 14.5215 26.0835 14.9951C26.0835 15.4686 25.7086 15.8435 25.2351 15.8435H13.1207ZM10.1414 15.8435C9.67774 15.8435 9.293 15.4686 9.293 14.9951C9.293 14.5215 9.66787 14.1467 10.1414 14.1467H10.9306C11.3943 14.1467 11.779 14.5215 11.779 14.9951C11.779 15.4686 11.4041 15.8435 10.9306 15.8435H10.1414ZM7.45807 15.8435C6.99441 15.8435 6.60967 15.4686 6.60967 14.9951C6.60967 14.5215 6.98454 14.1467 7.45807 14.1467H8.24729C8.71095 14.1467 9.09569 14.5215 9.09569 14.9951C9.09569 15.4686 8.72082 15.8435 8.24729 15.8435H7.45807ZM4.76488 15.8435C4.30122 15.8435 3.91647 15.4686 3.91647 14.9951C3.91647 14.5215 4.29135 14.1467 4.76488 14.1467H5.55409C6.01776 14.1467 6.4025 14.5215 6.4025 14.9951C6.4025 15.4686 6.02762 15.8435 5.55409 15.8435H4.76488ZM13.1207 6.41236C12.657 6.41236 12.2723 6.03749 12.2723 5.56396C12.2723 5.09043 12.6472 4.71555 13.1207 4.71555H25.2351C25.6988 4.71555 26.0835 5.09043 26.0835 5.56396C26.0835 6.03749 25.7086 6.41236 25.2351 6.41236H13.1207ZM10.1414 6.41236C9.67774 6.41236 9.293 6.03749 9.293 5.56396C9.293 5.09043 9.66787 4.71555 10.1414 4.71555H10.9306C11.3943 4.71555 11.779 5.09043 11.779 5.56396C11.779 6.03749 11.4041 6.41236 10.9306 6.41236H10.1414ZM7.45807 6.41236C6.99441 6.41236 6.60967 6.03749 6.60967 5.56396C6.60967 5.09043 6.98454 4.71555 7.45807 4.71555H8.24729C8.71095 4.71555 9.09569 5.09043 9.09569 5.56396C9.09569 6.03749 8.72082 6.41236 8.24729 6.41236H7.45807ZM4.76488 6.41236C4.30122 6.41236 3.91647 6.03749 3.91647 5.56396C3.91647 5.09043 4.29135 4.71555 4.76488 4.71555H5.55409C6.01776 4.71555 6.4025 5.09043 6.4025 5.56396C6.4025 6.03749 6.02762 6.41236 5.55409 6.41236H4.76488Z"
                                        fill="#47558D"></path>
                                </svg>

                                <span>Резидентные прокси </span>
                            </div>
                        </li>
                        {openSubmenuProxy && <ul className="submenuCabinet-open-list">
                            <li className="submenuCabinet-open-item">
                                <NavLink    className={({isActive}) => (isActive ? "active" : "")} to="/cabinet/dynamic">Динамичиские</NavLink>
                            </li>
                            {/*<li className="submenuCabinet-open-item">*/}
                            {/*    <NavLink to="#">Безлимитние</NavLink>*/}
                            {/*</li>*/}
                        </ul>}

                        {/*<li className='cabinetSideBarNav-submenu-item'>*/}
                        {/*    <NavLink to={"#"}>*/}
                        {/*    <div className='cabinetSideBarNav-submenu-item-text'>*/}

                        {/*        <svg width="30" height="30" viewBox="0 0 30 30" fill="#ffffff80;" xmlns="http://www.w3.org/2000/svg"><path d="M2.94 11.46C1.32 11.46 0 10.12 0 8.48V2.98C0 1.34 1.32 0 2.94 0H27.02C28.65 0 29.96 1.31 30 2.98V8.48C30 10.12 28.66 11.46 27.02 11.46H2.94ZM2.94 1.95C2.37 1.95 1.92 2.4 1.92 2.97V8.43C1.92 8.99 2.39 9.45 2.94 9.45H27.02C27.59 9.45 28.04 9 28.04 8.43V2.98C28.04 2.4 27.59 1.96 27.02 1.96H2.94V1.95ZM6.92 5.67C6.92 4.9 6.29 4.27 5.52 4.27C4.75 4.27 4.12 4.9 4.12 5.67C4.12 6.44 4.75 7.07 5.52 7.07C6.29 7.07 6.92 6.44 6.92 5.67ZM11.65 5.67C11.65 4.9 11.02 4.27 10.25 4.27C9.48 4.27 8.85 4.9 8.85 5.67C8.85 6.44 9.48 7.07 10.25 7.07C11.02 7.07 11.65 6.44 11.65 5.67ZM14.98 30C13.56 30 12.3 29.08 11.84 27.72L11.82 27.65H4.78C4.24 27.65 3.8 27.21 3.8 26.67C3.8 26.13 4.22 25.69 4.78 25.69H11.78L11.8 25.62C12.14 24.61 12.92 23.83 13.93 23.49L14 23.47V23.1H2.94C1.32 23.1 0 21.76 0 20.12V14.62C0 12.98 1.32 11.64 2.94 11.64H27.02C28.64 11.64 29.96 12.98 29.96 14.62V20.08C29.96 21.72 28.62 23.06 26.98 23.06H15.92V23.46L15.99 23.48C17 23.82 17.78 24.59 18.12 25.61L18.14 25.68H25.18C25.72 25.68 26.16 26.12 26.16 26.66C26.16 27.2 25.72 27.64 25.18 27.64H18.14L18.12 27.71C17.7 29.05 16.41 29.99 14.98 29.99V30ZM14.98 25.19C14.19 25.19 13.57 25.81 13.57 26.6C13.57 27.39 14.19 28.01 14.98 28.01C15.77 28.01 16.39 27.39 16.39 26.6C16.39 25.81 15.77 25.19 14.98 25.19ZM2.94 13.61C2.37 13.61 1.92 14.06 1.92 14.63V20.09C1.92 20.65 2.39 21.11 2.94 21.11H27.02C27.59 21.11 28.04 20.66 28.04 20.09V14.63C28.04 14.06 27.59 13.61 27.02 13.61H2.94ZM6.92 17.33C6.92 16.56 6.29 15.93 5.52 15.93C4.75 15.93 4.12 16.56 4.12 17.33C4.12 18.1 4.75 18.73 5.52 18.73C6.29 18.73 6.92 18.1 6.92 17.33ZM11.65 17.33C11.65 16.56 11.02 15.93 10.25 15.93C9.48 15.93 8.85 16.56 8.85 17.33C8.85 18.1 9.48 18.73 10.25 18.73C11.02 18.73 11.65 18.1 11.65 17.33Z" fill="#FE3059"></path></svg>*/}
                        {/*            <span>ISP</span>*/}

                        {/*    </div>*/}
                        {/*    </NavLink>*/}
                        {/*</li>*/}
                    </ul>
                </div>

                <div>
                    <h4 className='cabinetSideBarNav-submenu-title'>Финансы</h4>
                    <ul className="submenuCabinet-open-list">
                        <li className="submenuCabinet-open-item cabinetMenuItem">
                            <NavLink    className={({isActive}) => (isActive ? "active" : "")} to="/cabinet/balance"><svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M30 18.4864C30 15.4256 26.1031 13.0677 20.7692 12.7693V5.75248C20.7692 1.77804 15.5523 0 10.3846 0C5.21692 0 0.00153846 1.77804 0 5.75248V22.7023C0 26.6752 5.21538 28.4548 10.3846 28.4548C10.9185 28.4548 11.4615 28.4056 12.0108 28.3518C14.3749 29.5075 16.9849 30.0707 19.6154 29.9929C24.7831 29.9929 30 28.2133 30 24.2404V18.4879V18.4864ZM27.6923 18.4864C27.6923 20.1137 24.2385 21.9333 19.6154 21.9333C14.9923 21.9333 11.5385 20.1137 11.5385 18.4864C11.5979 18.1108 11.7458 17.7546 11.9699 17.4473C12.1941 17.1401 12.4881 16.8905 12.8277 16.7191C12.8538 16.7026 12.879 16.6846 12.9031 16.6653C14.951 15.5234 17.2719 14.9623 19.6154 15.0426C24.2385 15.0426 27.6923 16.8622 27.6923 18.4895V18.4864ZM18.4615 11.1943C18.4057 11.5466 18.2694 11.8812 18.0631 12.1723C17.8569 12.4633 17.5862 12.7029 17.2723 12.8723C15.3815 13.0521 13.5498 13.6287 11.8969 14.5642C11.4062 14.6058 10.9092 14.6365 10.3846 14.6365C6.03385 14.6365 2.30769 12.7416 2.30769 11.1912V9.57927C4.773 10.9482 7.56667 11.6148 10.3846 11.5065C13.2026 11.6148 15.9962 10.9482 18.4615 9.57927V11.1943ZM2.30769 14.7642C4.5077 16.1086 7.02106 16.8547 9.59846 16.9283C9.36154 17.4139 9.23593 17.9462 9.23077 18.4864V20.3444C5.39692 20.0506 2.30769 18.3603 2.30769 16.9483V14.7642ZM10.3846 2.30715C14.3554 2.30715 18.4615 3.59607 18.4615 5.75402C18.4615 7.99196 14.3077 9.19936 10.3846 9.19936C6.46154 9.19936 2.30769 7.99196 2.30769 5.75402C2.30769 3.59607 6.41385 2.30715 10.3846 2.30715ZM2.30769 22.7023V20.5167C4.3986 21.801 6.77972 22.5374 9.23077 22.6577V24.2404C9.22748 24.8998 9.38595 25.5499 9.69231 26.1338C5.95231 25.9938 2.30769 24.7341 2.30769 22.7023ZM19.6154 27.6858C17.3383 27.7556 15.0786 27.2688 13.0323 26.2676C12.6266 26.0916 12.2748 25.8113 12.0127 25.4553C11.7505 25.0992 11.5874 24.68 11.54 24.2404V22.1886C13.9775 23.6373 16.7818 24.3509 19.6154 24.2435C22.4495 24.3512 25.2544 23.6376 27.6923 22.1886V24.2404C27.6923 26.3968 23.5862 27.6858 19.6154 27.6858Z" fill="#47558D"></path></svg>
                                <span>Баланс</span>
                            </NavLink>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <div className={'cabinetScrollContainer'}>
            <header className='cabinetHeader'>
                <Container className="cabinetHeader-container">
                    <div className={'cabinetHeader-apikey'}>
                        <span>
                            API KEY:
                        </span>
                        <span className={'api-key-red'}>
                            testtesttetstest
                        </span>

                        <svg width="14" height="18" viewBox="0 0 14 18" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3.5" y="8" width="10" height="9" rx="1.5" fill="#FFCBD5" stroke="#FE3059"></rect><rect x="0.5" y="1" width="10" height="10" rx="1.5" fill="#FFCBD5" stroke="#FE3059"></rect></svg>
                    </div>
                    <div className={'cabinetHeader-secondPart'}>
                        <div className={'cabinetHeader-balance'}>
                            <span>
                                БАЛАНС:
                            </span>
                            <span className={'cabinetBalance-red'}>
                                $0
                            </span>
                        </div>
                        <div className={'cabinetHeader-mail'}>
                            <NavLink to={"/cabinet/profile"}>test@gamil.com</NavLink>
                        </div>

                        <div>
                            <button>
                                <svg width="14" height="14" viewBox="0 0 14 14" fill="none"
                                     xmlns="http://www.w3.org/2000/svg" className="">
                                    <g clip-path="url(#clip0_6004_328)">
                                        <path
                                            d="M11.7662 4.39833C11.4686 4.095 10.986 4.095 10.6865 4.39833C10.3889 4.70167 10.3889 5.19361 10.6865 5.49889L11.3961 6.22222H5.83731C5.41572 6.22222 5.07426 6.57028 5.07426 7C5.07426 7.42972 5.41572 7.77778 5.83731 7.77778H11.3961L10.6865 8.50111C10.3889 8.80445 10.3889 9.29639 10.6865 9.60167C10.8353 9.75333 11.0298 9.82917 11.2263 9.82917C11.4228 9.82917 11.6174 9.75333 11.7662 9.60167L13.7787 7.55028C14.0763 7.24694 14.0763 6.755 13.7787 6.44972L11.7662 4.39833ZM8.00245 14C8.95435 14 9.72885 13.2106 9.72885 12.2403V10.3639C9.72885 9.93417 9.38738 9.58611 8.9658 9.58611C8.54422 9.58611 8.20275 9.93417 8.20275 10.3639V12.2403C8.20275 12.3531 8.11309 12.4444 8.00245 12.4444H1.72639C1.61575 12.4444 1.52609 12.3531 1.52609 12.2403V1.75972C1.52609 1.64694 1.61575 1.55556 1.72639 1.55556H8.00245C8.11309 1.55556 8.20275 1.64694 8.20275 1.75972V3.66139C8.20275 4.09111 8.54422 4.43917 8.9658 4.43917C9.38738 4.43917 9.72885 4.09111 9.72885 3.66139V1.75972C9.72885 0.789445 8.95435 0 8.00245 0H1.72639C0.774493 0 0 0.789445 0 1.75972V12.2403C0 13.2106 0.774493 14 1.72639 14H8.00245Z"
                                            fill="black"></path>
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_6004_328">
                                            <rect width="14" height="14" fill="white"></rect>
                                        </clipPath>
                                    </defs>
                                </svg>

                            </button>
                        </div>
                        <div className={'notification-icon'}>
                            <button>
                                <svg width="20px" height="20px" viewBox="0 0 24.00 24.00" fill="none"
                                     xmlns="http://www.w3.org/2000/svg" stroke="#000000"
                                     stroke-width="0.00024000000000000003" className="_icon_b359w_12">
                                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                    <g id="SVGRepo_iconCarrier">
                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                              d="M9.29664 4.72727V5.25342C6.60683 6.35644 4.7276 9.97935 4.79579 13.1192L4.79577 14.8631C3.4188 16.6333 3.49982 19.2727 6.93518 19.2727H9.29664C9.29664 19.996 9.57852 20.6897 10.0803 21.2012C10.582 21.7127 11.2625 22 11.9721 22C12.6817 22 13.3622 21.7127 13.8639 21.2012C14.3656 20.6897 14.6475 19.996 14.6475 19.2727H17.0155C20.4443 19.2727 20.494 16.6278 19.1172 14.8576L19.1555 13.1216C19.2248 9.97811 17.3419 6.35194 14.6475 5.25049V4.72727C14.6475 4.00395 14.3656 3.31026 13.8639 2.7988C13.3622 2.28734 12.6817 2 11.9721 2C11.2625 2 10.582 2.28734 10.0803 2.7988C9.57852 3.31026 9.29664 4.00395 9.29664 4.72727ZM12.8639 4.72727C12.8639 4.72727 12.8633 4.76414 12.8622 4.78246C12.5718 4.74603 12.2759 4.72727 11.9757 4.72727C11.673 4.72727 11.3747 4.74634 11.082 4.78335C11.0808 4.76474 11.0803 4.74603 11.0803 4.72727C11.0803 4.48617 11.1742 4.25494 11.3415 4.08445C11.5087 3.91396 11.7356 3.81818 11.9721 3.81818C12.2086 3.81818 12.4354 3.91396 12.6027 4.08445C12.7699 4.25494 12.8639 4.48617 12.8639 4.72727ZM11.0803 19.2727C11.0803 19.5138 11.1742 19.7451 11.3415 19.9156C11.5087 20.086 11.7356 20.1818 11.9721 20.1818C12.2086 20.1818 12.4354 20.086 12.6027 19.9156C12.7699 19.7451 12.8639 19.5138 12.8639 19.2727H11.0803ZM17.0155 17.4545C17.7774 17.4545 18.1884 16.5435 17.6926 15.9538C17.4516 15.6673 17.3233 15.3028 17.3316 14.9286L17.3723 13.0808C17.4404 9.99416 15.0044 6.54545 11.9757 6.54545C8.94765 6.54545 6.51196 9.99301 6.57898 13.0789L6.61916 14.9289C6.62729 15.303 6.49893 15.6674 6.25806 15.9538C5.76221 16.5435 6.17325 17.4545 6.93518 17.4545H17.0155ZM16.9799 3.20202C17.2945 2.74813 17.9176 2.63524 18.3715 2.94988C19.5192 3.74546 20.8956 5.65348 21.6471 7.9126C21.8214 8.43664 21.5379 9.00279 21.0139 9.17712C20.4898 9.35145 19.9237 9.06795 19.7493 8.5439C19.0892 6.55949 17.9221 5.07189 17.2321 4.59358C16.7782 4.27894 16.6653 3.65592 16.9799 3.20202ZM5.4303 2.94988C5.8842 2.63524 6.50722 2.74813 6.82185 3.20202C7.13649 3.65592 7.0236 4.27894 6.56971 4.59358C5.87969 5.07189 4.71256 6.55949 4.05242 8.5439C3.87809 9.06795 3.31194 9.35145 2.78789 9.17712C2.26384 9.00279 1.98034 8.43664 2.15467 7.9126C2.90619 5.65348 4.2826 3.74546 5.4303 2.94988Z"
                                              fill="#000000"></path>
                                    </g>
                                </svg>
                            </button>
                        </div>

                        {/* Вибір мови */}
                        <div className="languageBox" onClick={() => setOpen(!open)}>
                            <img width={20} src={languages[currentLang].flag} alt="flag"/>
                            <span className="languageText">
                                  {languages[currentLang].label} ▾
                                </span>
                            {open && (
                                <div className="languageDropdown">
                                    {Object.keys(languages).map((lang) => (
                                        <div
                                            key={lang}
                                            className="languageOption"
                                            onClick={() => changeLanguage(lang)}
                                        >
                                            <img width={18} src={languages[lang].flag} alt={lang}/>
                                            <span>{languages[lang].label}</span>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>


                    </div>
                </Container>
            </header>
            <Outlet/>
        </div>

    </div>)
}

export default CabinetLayout